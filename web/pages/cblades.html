<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cursed Blades</title>
</head>
<body>
<p>That is Cursed Blades</p>

<script type="module">

    import {
        DImage, DStaticLayer
    } from "../jslib/draw.js";
    import {
        DBoard, DElement, DImageArtifact
    } from "../jslib/board.js";
    import {
        Memento
    } from "../jslib/mechanisms.js";
    import {
        Point2D, Dimension2D
    } from "../jslib/geometry.js";
    import {
        DWidget
    } from "../jslib/widget.js";

    let board = new DBoard(new Dimension2D(500, 300), new Dimension2D(500, 300),
        "map", "units", "markers", new DStaticLayer("panels"));
    console.log(board.root);
    document.body.appendChild(board.root);
    let image = DImage.getImage("../images/civilians1.png");
    let imageMarker = DImage.getImage("../images/tired.png");
    let artifact = new DImageArtifact("units", image, new Point2D(0, 0), new Dimension2D(50, 50));
    let artifactMarker = new DImageArtifact("markers", imageMarker, new Point2D(-25, -25), new Dimension2D(30, 30));
    let element = new DElement(artifact, artifactMarker);
    element.setRotation(30);
    element.show(board);
    board.paint();
    board.onMouseClick(event=>{
        let offset = new Point2D(event.offsetX, event.offsetY);
        let artifact = board.getArtifactOnPoint(offset);
        if (artifact) {
            let widget = new DWidget()
                .setPanelSettings(new Dimension2D(100, 150))
                .setLocation(new Point2D(offset.x-50, offset.y))
                .setOnBoard(board);
            /*
            let element = artifact.element;
            let point = board.getBoardXY(offset);
            //board.recenter(offset);
            element.move(point);
            element.rotate(element.angle+60);
            return true;

             */
        }
    });
    board.scrollOnBordersOnMouseMove();
    board.zoomInOutOnMouseWheel();
    board.scrollOnKeyDown()
    board.zoomOnKeyDown();
    board.undoRedoOnKeyDown();
    Memento.activate();
</script>
</body>
</html>